<link rel="stylesheet" type="text/css" href="style.css">
  <script src="jquery.min.js"></script>
  <script src="customEase.min.js"></script>
  <script src="gsap.min.js"></script>
<section id="tt_wrapper">
    <div id="sc_wrapper_touhid">
      <div id="wrapper_touhid"> </div>
      <div id="next_touhid" style="opacity: 0;"></div>
      <div id="shake_text_touhid" style="opacity: 0;"></div>
    </div>
    <div id="dragEl_touhid"></div>
    <div id="closeBtn_touhid"></div>
</section>
<script>
function loadImages(){for(var e=0;e<bgs.length;e++){var t=new Image;t.src=assets_url+bgs[e],ddef.box.imgs.push(t)}}function initIFrame(){events(),dragLoop(),loadImages(),prepBox(),setCss(),goOut(),screenCanvas(),loop(),initDrag(),initAnim(),onResize(),o.container.style.top=ddef.topY+"px",setTimeout(function(){ddef.animInt=setInterval(function(){console.log("explodeAd"),explodeAd()},3000)},500);var e=ddef.screen.w<ddef.screen.h?ddef.screen.w:ddef.screen.h;(ad_s=.35*e/150)>1&&(ad_s=1)}function events(){ddef.screen.w=_window.innerWidth,ddef.screen.h=_window.innerHeight,_window.addEventListener("resize",onResize)}var _document,_window,iframe,ad_s=1;function onResize(){var e=_window.innerWidth,t=_window.innerHeight,n=ddef.canvas;n.width=e,n.height=t,n.style.width=e,n.style.height=t,ddef.screen.w=e,ddef.screen.h=t,ddef.topY=.65*_window.innerHeight}function screenCanvas(){var e=document.createElement("canvas");e.width=_window.innerWidth,e.height=_window.innerHeight,e.style.width=_window.innerWidth,e.style.height=_window.innerHeight,e.style.position="fixed",e.style.zIndex=9999998,e.style.top="0px",e.style.bottom="0px",e.style.left="0px",e.style.right="0px",e.style.pointerEvents="none",ddef.canvas=e,ddef.ctx=e.getContext("2d"),_document.getElementsByTagName("body")[0].appendChild(e)}function initCircles(){for(var e=0;e<ddef.circles.amm;e++)ddef.circles.list.push({}),createCircle(e)}function showCTA(){gsap.set(o.cta,{opacity:1,scale:0,transformOrigin:"50% 90%"}),gsap.to(o.cta,.35,{delay:.7,scale:1,ease:Back.easeOut,transformOrigin:"50% 90%",onComplete:function(){gsap.to(o.cta,.35,{scale:.9,ease:Power1.easeInOut,yoyo:!0,repeat:-1,repeatDelay:.05})}})}function hideBTN(){gsap.to(o.shake_text,.35,{scale:0,ease:Back.easeIn,transformOrigin:"50% 85%",onComplete:function(){ddef.shakeTl&&ddef.shakeTl.kill()}})}function initAnim(){CustomEase.create("e0","M0,0 C0.128,0.572 0.263,0.926 0.518,1 0.678,1.046 0.838,1 1,1"),gsap.set(o.wrapper,{scale:1,x:0,y:0,transformOrigin:"50% 50%"}),gsap.from(o.wrapper,.75,{delay:.1,rotation:180,scale:0,ease:"e0",onStart:function(){},onComplete:function(){}}),setTimeout(startSpawn,1e3)}function startSpawn(){if(initCircles(),0==ddef.box.cur){gsap.set(o.shake_text,{scale:1.1,transformOrigin:"50% 90%"}),gsap.to(o.shake_text,1,{delay:0,opacity:1}),ddef.shakeTl=gsap.to(o.shake_text,.35,{scale:.95,ease:Power1.easeInOut,yoyo:!0,repeat:-1,repeatDelay:.05})}}function createCircle(e){var t=ddef.screen.x+ddef.w*(.5+.3*(.5-Math.random())),n=ddef.screen.y+ddef.h*(.5+.3*(.5-Math.random())),o=.75*ddef.w,d=2*Math.random()*Math.PI,a=ddef.drag.dx,s=ddef.drag.dy;a>20&&(a=20),s>20&&(s=20),a<-20&&(a=-20),s<-20&&(s=-20);var r=gsap.parseEase("power1.in"),i=gsap.parseEase("power1.out"),c=r;Math.random()>.5&&(r=i,i=c);var l={active:!1,color:ddef.col[Math.floor(Math.random()*ddef.col.length)],live:0,dur:.6+1.4*Math.random(),posStart:{x:t,y:n},e1:r,e2:i,force:{x0:.5*-a,y0:.5*-s,x:0,y:0},posEnd:{x:t+o*Math.cos(d),y:n+o*Math.sin(d)},s0:13+13*Math.random(),pos:{x:0,y:0},s:0,tl:null,index:e};gsap.to(l,.2*l.dur,{s:l.s0,ease:Power2.easeOut,onComplete:function(){gsap.to(l,.8*l.dur,{s:0,ease:Power1.easeIn})}}),l.tl=gsap.to(l,l.dur,{live:1,ease:Linear.easeNone,onStart:function(){l.active=!0},onComplete:function(){l.active=!1,ddef.adEnd||createCircle(e)}}),ddef.circles.list[e]=l}function calc(e,t,n){if(e.force.x+=e.force.x0,e.force.y+=e.force.y0,e.force.x0*=.98,e.force.y0*=.98,0==n){var o=e.live,d=e.e1(o),a=e.e2(o);e.pos.x=e.posStart.x+(e.posEnd.x-e.posStart.x)*d,e.pos.y=e.posStart.y+(e.posEnd.y-e.posStart.y)*a}}function draw(e,t,n){var o=e.pos.x+e.force.x,d=e.pos.y+e.force.y;ddef.ctx.fillStyle=e.color,ddef.ctx.beginPath(),ddef.ctx.rect(o,d,e.s,e.s),ddef.ctx.fill()}function loop(){requestAnimFrame(loop),ddef.ctx.clearRect(0,0,ddef.screen.w,ddef.screen.h),ddef.closed||dragLoop(),particleLoop(),boxLoop()}function prepBox(){var e=ddef.box.w,t=ddef.box.h,n=Math.round(6+6*Math.random()),o=t,d=0;CustomEase.create("nEase","M0,0,C0.242,0,0.241,-0.68,0.358,-0.652,0.786,-0.548,0.94,0.891,1,1"),ddef.nEase=gsap.parseEase("nEase"),CustomEase.create("nEase2","M0,0,C0.128,0.572,0.311,1.416,0.566,1.49,0.726,1.536,0.786,1,1,1"),ddef.nEase2=gsap.parseEase("nEase2"),CustomEase.create("pEase","M0,0,C0.322,0,0.359,0.377,0.488,0.704,0.554,0.871,0.648,1.129,0.77,1.144,0.854,1.154,0.886,1,1,1"),ddef.pEase=gsap.parseEase("pEase"),CustomEase.create("pEase2","M0,0 C0.24,0 0.331,0.03 0.418,0.154 0.568,0.368 0.607,0.901 0.778,1.01 0.888,1.08 0.94,1 1,1 "),ddef.pEase2=gsap.parseEase("pEase2"),CustomEase.create("custom","M0,0,C0.247,0,0.378,0.174,0.548,0.388,0.742,0.633,0.758,1,1,1");for(var a=0,s=0;s<n;s++){var r=o/(n-s)*(.5+1*Math.random());s==n-1&&(r=t-d),o+=-r;for(var i=Math.round(4+4*Math.random()),c=e,l=0,f=0;f<i;f++){var p=c/(i-f)*(.5+1*Math.random());f==i-1&&(p=e-l),c+=-p,createBox({count:a,i:s,j:f,w:p,h:r,x:l,y:d}),l+=p,a++}d+=r}}function createBox(e){var t=-e.x+.4*ddef.w,n=.4*ddef.h-e.y,o=10*(.5-Math.random()),d={x:e.x,y:e.y,dx:t,dy:n,w:e.w,h:e.h,life:0,active:!1,tl:null,s:0,r:o,img_id:ddef.box.cur,img_changed:!1},a=Math.random();a=.7*(.8+.2*Math.random());var s=e.x+e.w/2,r=e.y+e.h/2,i=Math.sqrt(Math.pow(s-ddef.w/2,2)+Math.pow(r-ddef.h/2,2))/ddef.w;ddef.points.push({x:s,y:r}),d.tl=gsap.to(d,a,{delay:i,life:1,ease:"none",onStart:function(){d.active=!0},onUpdate:function(e){var a=this.targets()[0].life,s=ddef.nEase(1-a);ddef.nEase2(1-a),Back.easeIn(1-a);d.s=Power0.easeNone(1*a),d.s>1&&(d.s=1),d.r=o*Power1.easeOut(1-a),d.dx=t*s,d.dy=n*s}}),ddef.box.list.push(d)}function drawPoints(){for(var e=0;e<ddef.points.length;e++){var t=ddef.points[e];ddef.ctx.beginPath(),ddef.ctx.rect(t.x,t.y,10,10),ddef.ctx.stroke()}}function explodeAd(e){for(var t=0;t<ddef.box.list.length;t++)explodeBox(t,e)}function explodeBox(e,t){var n=-1*ddef.screen.w*Math.random()+(1-ddef.screen.x/ddef.screen.w)*ddef.screen.w,o=-1*ddef.screen.h*Math.random()+(1-ddef.screen.y/ddef.screen.h)*ddef.screen.h,d=5*(.5-Math.random()),a=.3+.3*Math.random();if("close"!=t){explodeAnim(ddef.box.list[e])}else{clearInterval(ddef.animInt);a=.5+.5*Math.random();gsap.to(ddef.box.list[e],a,{dx:n,dy:o,r:d,s:0,ease:Power3.easeOut,onComplete:function(){ddef.box.list[e].active=!1}})}}function explodeAnim(e){var t=.35+.1*Math.random(),n={val:0},o=ddef.screen.x+ddef.w/2,d=ddef.screen.y+ddef.h/2,a=ddef.screen.x+e.x+e.w/2-o,s=ddef.screen.y+e.y+e.h/2-d,r=Math.sign(a),i=Math.sign(s),c=900/Math.sqrt(a*a+s*s);c>30&&(c=30);var l=1/c,f=100*(.5-Math.random()),p=100*(.5-Math.random()),u=r*(c+100)+f,m=i*(c+100)+p,h=10*(.5-Math.random());gsap.to(n,t,{delay:l,val:1,ease:"power1.out",onUpdate:function(){var t=n.val;e.dx=u*t,e.dy=m*t,e.r=h*t},onComplete:function(){var n=Math.sign(h),o=180*(h+10*n*(.5+.5*Math.random()))/Math.PI,d=(o-o%360)*Math.PI/180;gsap.to(e,.8*t,{dx:0,dy:0,r:d,ease:"custom",onUpdate:function(){!e.img_changed&&this.ratio>.5&&(e.img_id++,e.img_id>=bgs.length&&(e.img_id=0),e.img_changed=!0)},onComplete:function(){e.img_changed=!1}})}})}function boxLoop(){for(var e=0;e<ddef.box.list.length;e++)if(ddef.box.list[e].active){var t=ddef.box.list[e],n=t.w/2*(1-t.s),o=t.h/2*(1-t.s),d=t.w,a=t.h,s=t.x+ddef.screen.x+n+t.dx,r=t.y+ddef.screen.y+o+t.dy,i=t.x,c=t.y;ddef.ctx.setTransform(t.s,0,0,t.s,s+t.w/2,r+t.h/2),ddef.ctx.rotate(t.r),ddef.ctx.drawImage(ddef.box.imgs[t.img_id],1*i,1*c,1*d,1*a,-t.w/2,-t.h/2,d,a)}ddef.ctx.setTransform(1,0,0,1,0,0)}function dragLoop(){ddef.drag.dx=ddef.drag.lx-ddef.drag.x,ddef.drag.dy=ddef.drag.ly-ddef.drag.y,ddef.drag.lx=ddef.drag.x,ddef.drag.ly=ddef.drag.y;ddef.can.rot=ddef.drag.dx;var e=ddef.can.rot-ddef.can.drot;ddef.can.drot+=e/2;var t=ddef.can.drot;t>30&&(t=30),t<-30&&(t=-30);var n=t/30,d=Math.sign(n),a=30*Power1.easeIn(Math.abs(n))*d;gsap.set(o.wrapper,{rotation:a});var s=getComputedStyle(o.container),r=parseFloat(s.getPropertyValue("left")),i=parseFloat(s.getPropertyValue("top"));ddef.screen.x=r,ddef.screen.y=i}function particleLoop(){for(var e=0;e<ddef.circles.list.length;e++){if(ddef.circles.list[e].active)calc(t=ddef.circles.list[e],e,0),draw(t,e,0)}for(e=0;e<ddef.circles2.list.length;e++){var t;if(ddef.circles2.list[e].active)calc(t=ddef.circles2.list[e],e,1),draw(t,e,1)}}function initDrag(){var e=0,t=0,n=0,d=0,a=0;!function(s){function r(t){e=0,_document.onmouseup=u,_document.ontouchend=u,_document.onmousemove=i,_document.ontouchmove=c}function i(e){p(e=e||_window.event,!0)}function c(e){e.stopImmediatePropagation(),p(e,!1)}s.onmousedown=function(e){(e=e||_window.event).preventDefault(),gsap.to(o.sc_wrapper,.2,{scale:1.1,ease:Power1.easeOut}),d=e.clientX,a=e.clientY,r(e)},s.ontouchstart=function(e){(e=e||_window.event).preventDefault(),gsap.to(o.sc_wrapper,.2,{scale:1.1,ease:Power1.easeOut}),d=e.touches[0].clientX,a=e.touches[0].clientY,r(e)};var l={x:0,y:0},f={x:0,y:0};function p(s,r){e++;var i=r?s.clientX:s.touches[0].clientX,c=r?s.clientY:s.touches[0].clientY;t=d-i,n=a-c,d=i,a=c,f.x+=l.x-t,f.y+=l.y-n;var p=f.x,u=f.y;ddef.drag.x=p,ddef.drag.y=u;var m=ddef.topY;o.container.style.right=14-p+"px",o.container.style.top=m+u+"px"}function u(t){e<=2&&0==m&&(ddef.box.cur++,ctaFunction(),m=1,setTimeout(function(){m=0},1e3)),gsap.to(o.sc_wrapper,.25,{scale:1,ease:Power1.easeOut}),_document.onmouseup=null,_document.onmousemove=null,_document.ontouchend=null,_document.ontouchmove=null}var m=0}(o.dragEl)}function ctaFunction(){_window.open("{CLICK_MACRO}")}var assets_url="//ms.purplepatch.online/overlay/floating-pran-june-21/",bgs=["4.jpg","1.jpg","2.jpg","3.jpg","5.jpg"],o={};o.container=document.getElementById("tt_wrapper"),o.closeBtn=document.getElementById("closeBtn_touhid"),o.wrapper=document.getElementById("wrapper_touhid"),o.sc_wrapper=document.getElementById("sc_wrapper_touhid"),o.dragEl=document.getElementById("dragEl_touhid"),o.shake_text=document.getElementById("shake_text_touhid"),o.cta=document.getElementById("cta_touhid"),o.next=document.getElementById("next_touhid");var ddef={topY:0,ftClick:!0,adEnd:!1,cokeStarted:!1,box:{w:200,h:167,cur:0,imgs:[],list:[]},col:["#66b901","#e4e735","#c0e7ca"],drag:{x:0,y:0,lx:0,ly:0,dx:0,dy:0},screen:{w:0,h:0,x:0,y:0},w:200,h:167,canvas:null,ctx:null,circles:{amm:20,list:[],posRed:.8},circles2:{amm:30,list:[],posRed:.8},can:{rot:0,drot:0,mx:0,my:0,x:50,y:17,w:46,h:99},shakeCalc:{list:new Array(30)},points:[]};function goOut(){var e=_document.getElementsByTagName("body");$("section").appendTo(e)}function setCss(){var e=document.createElement("link");e.href=assets_url+"style.css",e.rel="stylesheet",e.type="text/css",_window.document.head.appendChild(e)}function closeAd(){ddef.closed=!0,explodeAd("close"),gsap.to(o.container,.25,{scale:0,ease:Back.easeIn,onComplete:function(){o.container.style.display="none"}}),ddef.adEnd=!0}function isHidden(e){return null===e.offsetParent}o.closeBtn.addEventListener("click",closeAd),$(document).on("visibilitychange",function(){"visible"==document.visibilityState&&(console.log("content now visible"),setTimeout(closeAd,55000))}),isHidden("#tt_wrapper")||(console.log("content is visible"),setTimeout(closeAd,55000)),function(){try{var e=window,t=setInterval(function(){null==e.frameElement?(_document=e.document,_window=e,clearInterval(t),initIFrame()):iframe=e.frameElement,e=e.parent},10)}catch(e){console.error(e)}}(),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1000/60)};
</script>